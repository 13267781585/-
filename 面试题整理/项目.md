API编排引擎
通过配置快速搭建BFF的轻量级编排引擎，适用于业务处理逻辑不复杂、透出字段需要经常变更的api接口，缩短80%api接口开发成本。主要有以下优势：

* 以管道-节点链为模型，平台实现基础的节点，例如rpc调用节点、限流节点、js脚本节点等，并开放了节点范式接口，使用方可自定义节点，可扩展性高，以下是核心节点：
  * 基于kitex框架泛化特性和idl管理平台实现了rpc接口动态调用
  * 限流
  * js脚本
* 提供多样节点编排能力，例如并发运行多个节点、while循环多次调度、switch选择性调度等，可以实现更复杂业务逻辑实现
* 使用协程池管理协程，本地mq解耦协程和api节点链绑定关系，提高接口执行效率
* 使用expr表达式引擎实现数据校验、组装、过滤等复杂操作，并且使用方可基于范式自定义数据处理函数
* 为了方便接口开发测试，实现了以下功能：
  * idl和接口实现版本管理，可以基于不用 版本进行开发调试，各个版本互不影响
  * 灰度
  * 调用过程中产生日志做为数据返回，便于开发者排查问题

疑问

* 为什么说是轻量级？

服务市场

* 海量数据搜索：监听数据库binlog变更，通过mq更新数据到es，实现多条件服务搜索
* 高频数据访问性能提升：使用redis缓存高频访问数据，通过业务分割数据和冗余方式解决big key和hot key问题
* redis分布式锁优化：使用定时任务检查任务延长redis分布式锁防止提前锁释放
* 大数据表性能提升：熟悉分库分表原理和跨表操作的解决方案
订阅流水表
数据行1k，量级2000w，主键索引三层到四层的临界
表数据日增加3k，60%正常订阅，40%自动化测试订阅流水
分表维度
时间->不可取，因为订阅时长存在永久，随着时间推移，会出现跨分片查询的场景
商家user_id，order_id使用基因法，partner_id查询场景，重新拉一个数据分片，以partner_id位分片字段，该分片只读，通过监听binlog做数据一致性处理
问题：
* 服务商维护、服务商+服务维护
*

* 分布式事务：有丰富分布式事务经验，使用强分布式事务和弱分布式事务解决过实际业务场景
学习计划

* herzt、kitex框架
* 表达式引擎调研
* 同类产品调研
  * Janus
  * agw
  * 亚马逊asf
* 协程池原理
* kitex泛化调用效率
* js脚本

* redis
* es
* 分布式事务
* 分表分库
