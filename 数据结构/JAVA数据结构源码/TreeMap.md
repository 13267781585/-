## TreeMap源码解读
```java
public class TreeMap<K,V>
    extends AbstractMap<K,V>
    implements NavigableMap<K,V>, Cloneable, java.io.Serializable
```

1. TreeMap 是基于红黑树实现的，红黑树是平衡二叉树，反之不成立，我们知道，对于一般的二叉搜索树，其期望高度（即为一棵平衡树时）为log2n，其各操作的时间复杂度（O(log2n)）同时也由此而决定。但是，在某些极端的情况下（如在插入的序列是有序的时），二叉搜索树将退化成近似链表或链，此时，其操作的时间复杂度将退化成线性的，即O(n)。我们可以通过随机化建立二叉搜索树来尽量的避免这种情况，但是在进行了多次的操作之后，由于在删除时，我们总是选择将待删除节点的后继代替它本身，这样就会造成总是右边的节点数目减少，以至于树向左偏沉。这同时也会造成树的平衡性受到破坏，提高它的操作的时间复杂度。红黑树是一种自平衡的二叉树，他会通过左旋、右旋使树维持平衡。

2. 红黑树规则
i. 节点是红色或黑色
ii. 根节点是黑色
iii. 每个叶节点（NIL节点，空节点）是黑色的
iv. 每个红色节点的两个子节点都是黑色。(从每个叶子到根的所有路径上不能有两个连续的红色节点)
vi. 从任一节点到其每个叶子的所有路径都包含相同数目的黑色节点。

上面的规则前4条都好理解，第5条规则到底是什么情况，下面简单解释下，比如：图中红8到1左边的叶子节点的路径包含两个黑色节点，到6下面的叶子节点的路径也包含两个黑色节点
![2-1](..\image\TreeMap2-1.jpg)

3. TreeMap 是有序的，这里的有序是指在内部通过自定义排序器或者默认key排序，将数据按规则排序，而LinkedHashMap 的有序是指记录了数据先后放入的顺序，两个数据结构都是有序的，只是有序指的不同的方面。