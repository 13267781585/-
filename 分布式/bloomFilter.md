# BloomFilter

空间高效概率型数据库，用于判断元素是否在集合中，他可能误判元素在集合中，但是不可能误判元素不在集合中。常用于数据过滤场景。

## 原理

有N个元素，利用K个哈希函数，把这些元素映射到长度为M的位数据上，如果这些位置上都为1，说明元素在(可能)，反之则说明不在。在创建布隆过滤器时，会根据预估的元素+误判率去推算最佳的位数组长度还有哈希函数的数量，计算公式如下：

* 哈希函数的个数=0.7*(M/N)
* 误判率=0.6185^(M/N)
从公式可以看出：
* 位数组越长(M/N)，哈希函数的数据越多
* 位数组越长(M/N)，错误率越低
* 错误率位10%，一个元素需要使用大约5bit空间
* 错误率位1%，一个元素需要使用大约10bit空间
* 错误率位0.1%，一个元素需要使用大约15bit空间

## 大数据量

在大数据量场景下，一个布隆过滤器无法承载，可以使用多个，并且再使用哈希函数定位具体的过滤器。

## 删除

因为布隆过滤器不支持删除的场景，实际应用中，随着时间推移，删除的数据越来越多，布隆过滤器存在的脏数据越多，需要周期性根据全量数据重新生成布隆过滤器。
